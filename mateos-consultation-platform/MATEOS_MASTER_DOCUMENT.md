# üéì Mateos Consultation Platform - Master Document
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 10 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** –í –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (Phase 4)

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å](#—Ç–µ–∫—É—â–∏–π-—Å—Ç–∞—Ç—É—Å)
3. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
4. [–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–∑—ã](#—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ-—Ñ–∞–∑—ã)
5. [–ü–ª–∞–Ω –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ](#–ø–ª–∞–Ω-–Ω–∞-–≤—ã—Ö–æ–¥–Ω—ã–µ)
6. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
7. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
8. [–í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#–≤–∞–∂–Ω—ã–µ-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)

---

## üéØ –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**Mateos** - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞:
- üë®‚Äçüë©‚Äçüëß‚Äçüë¶ **–°–µ–º–µ–π–Ω–∞—è –º–æ–¥–µ–ª—å** (—Ä–æ–¥–∏—Ç–µ–ª—å –ø—Ä–∏–≥–ª–∞—à–∞–µ—Ç –¥–µ—Ç–µ–π)
- üë• **Mini-–≥—Ä—É–ø–ø—ã** (3 –∏–ª–∏ 6 —á–µ–ª–æ–≤–µ–∫)
- üìö **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏**
- üì¶ **–ü–∞–∫–µ—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** (5/10/20 —É—Ä–æ–∫–æ–≤)
- üí≥ **–ü–æ–¥–ø–∏—Å–∫–∏** (–¥–æ 12 —É—Ä–æ–∫–æ–≤/–º–µ—Å—è—Ü)
- ‚è∞ **48-—á–∞—Å–æ–≤–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ –æ—Ç–º–µ–Ω—ã**

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —Ñ–∞–∑—ã (29.5% –æ–±—â–µ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞)

#### **Phase 1: Types & Interfaces** (4h) - ‚úÖ 100%
- ‚úÖ `Group` interface —Å `maxCapacity` –∏ `description`
- ‚úÖ `Student` interface —Å family model (`parentId`, `parent?`)
- ‚úÖ `Consultation` interface —Å `type` –∏ `individualStudent?`
- ‚úÖ `Parent` –∏ `ChildInvite` –¥–ª—è —Å–µ–º–µ–π–Ω–æ–π –º–æ–¥–µ–ª–∏
- ‚úÖ `ConsultationType` enum: "Individual" | "Group"

**–§–∞–π–ª—ã:** `src/types/index.ts`

---

#### **Phase 2: Services** (8h) - ‚úÖ 100%
- ‚úÖ `GroupService` - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –≥—Ä—É–ø–ø
- ‚úÖ `ConsultationService` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è–º–∏
- ‚úÖ `MaterialService` - –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- ‚úÖ `SubscriptionUsageService` - tracking –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–æ–∫

**–ú–µ—Ç–æ–¥—ã GroupService:**
```typescript
getTeacherGroups(): Promise<Group[]>
getById(groupId: string): Promise<Group>
create(data: CreateGroupDto): Promise<Group>
update(groupId: string, data: UpdateGroupDto): Promise<Group>
delete(groupId: string): Promise<void>
addMember(groupId: string, studentId: string): Promise<void>
removeMember(groupId: string, studentId: string): Promise<void>
getMembers(groupId: string): Promise<Student[]>
```

**–§–∞–π–ª—ã:** `src/services/groupService.ts`, `consultationService.ts`, `materialService.ts`, `subscriptionUsageService.ts`

---

#### **Phase 2.5: Parent-Child Services** (4h) - ‚úÖ 100%
- ‚úÖ `FamilyService` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–º–µ–π–Ω—ã–º–∏ —Å–≤—è–∑—è–º–∏
- ‚úÖ `InviteChildDialog` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –¥–µ—Ç–µ–π
- ‚úÖ `ChildrenList` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–µ–π –≤ Parent Dashboard

**–ú–µ—Ç–æ–¥—ã FamilyService:**
```typescript
inviteChild(email: string, studentName: string): Promise<void>
getChildren(): Promise<Student[]>
getPendingInvites(): Promise<ChildInvite[]>
removeChild(childId: string): Promise<void>
acceptInvite(inviteCode: string): Promise<void>
```

**–§–∞–π–ª—ã:** `src/services/familyService.ts`, `src/components/family/InviteChildDialog.tsx`, `ChildrenList.tsx`

---

#### **Phase 3: Teacher Dashboard Components** (8h) - ‚úÖ 100%
- ‚úÖ `GroupsOverview.tsx` (195 lines) - –∫–∞—Ä—Ç–æ—á–∫–∏ –≥—Ä—É–ø–ø —Å capacity indicators
- ‚úÖ `IndividualStudents.tsx` (237 lines) - —Å—Ç—É–¥–µ–Ω—Ç—ã —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è–º–∏
- ‚úÖ `TeacherDashboard.tsx` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Tabs (Consulta»õii/Grupe/Elevi Individuali)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ GroupsOverview:**
- Visual dots indicator (–∑–µ–ª–µ–Ω—ã–µ/–∫—Ä–∞—Å–Ω—ã–µ —Ç–æ—á–∫–∏)
- Mini-group badges ("Mini 3" / "Mini 6")
- Click navigation ‚Üí `/groups/:groupId`
- Empty state —Å –ø—Ä–∏–∑—ã–≤–æ–º —Å–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É
- Capacity display: "3/6 membri"

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ IndividualStudents:**
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π –ø–æ —Å—Ç—É–¥–µ–Ω—Ç–∞–º
- Handling `ConsultationDto` —Å `individualStudentId: string[]`
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ `UserDto` –∏–∑ `participants` (PascalCase: Id, Name, Surname, Email)
- –ü–æ–∫–∞–∑ –±–ª–∏–∂–∞–π—à–µ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞

**–§–∞–π–ª—ã:** `src/components/teacher/GroupsOverview.tsx`, `IndividualStudents.tsx`, `index.ts`

---

#### **Phase 3.5: Group Capacity UI** (2h) - ‚úÖ 100%
–°–∏—Å—Ç–µ–º–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è capacity –¥–ª—è mini-–≥—Ä—É–ø–ø.

##### 1Ô∏è‚É£ **GroupCapacityBadge** (74 lines)
–¶–≤–µ—Ç–Ω–æ–π badge —Å capacity:
- üü¢ **–ó–µ–ª–µ–Ω—ã–π** (<80%): "3/6 locuri"
- üü† **–û—Ä–∞–Ω–∂–µ–≤—ã–π** (80-99%): "5/6 locuri" —Å ‚ö†Ô∏è
- üî¥ **–ö—Ä–∞—Å–Ω—ã–π** (100%): "6/6 Complet" —Å ‚ö†Ô∏è

```tsx
<GroupCapacityBadge
  currentMembers={5}
  maxCapacity={6}
  variant="compact"
  showIcon={true}
/>
```

##### 2Ô∏è‚É£ **AddMemberDialog** (215 lines)
Dialog –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —á–ª–µ–Ω–æ–≤ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π:
- ‚úÖ Capacity validation –ü–ï–†–ï–î –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º
- ‚úÖ Warning alerts (–æ—Ä–∞–Ω–∂–µ–≤—ã–π –ø—Ä–∏ 1-2 —Å–≤–æ–±–æ–¥–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö)
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –≥—Ä—É–ø–ø–µ
- ‚úÖ Email search input
- ‚úÖ Keyboard support (Enter to submit)
- ‚úÖ Educational messaging –æ mini-–≥—Ä—É–ø–ø–∞—Ö

##### 3Ô∏è‚É£ **GroupCapacityIndicator** (150 lines)
–ü–æ–ª–Ω—ã–π capacity display —Å Card:
- ‚úÖ Custom progress bar (–∑–∞–º–µ–Ω–∞ Progress component)
- ‚úÖ Stats grid: Membri / Maximum / Locuri disponibile
- ‚úÖ Status messages (–∑–µ–ª–µ–Ω—ã–µ/–æ—Ä–∞–Ω–∂–µ–≤—ã–µ/–∫—Ä–∞—Å–Ω—ã–µ)
- ‚úÖ –î–≤–∞ —Ä–µ–∂–∏–º–∞: compact (–±–µ–∑ Card) –∏ full (—Å Card)

**–§–∞–π–ª—ã:** `src/components/groups/GroupCapacityBadge.tsx`, `AddMemberDialog.tsx`, `GroupCapacityIndicator.tsx`, `index.ts`

---

#### **Phase 4: Group Details Page** (12h) - üîÑ 20% (–í –ü–†–û–¶–ï–°–°–ï)

##### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —Å–µ–≥–æ–¥–Ω—è:

###### 1Ô∏è‚É£ **GroupDetailsPage.tsx** (350 lines)
Comprehensive —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª–µ–π –≥—Ä—É–ø–ø—ã:
- ‚úÖ URL param extraction (`useParams<{ groupId }>`)
- ‚úÖ Data loading —á–µ—Ä–µ–∑ `GroupService.getById()`
- ‚úÖ Simple breadcrumb navigation (Dashboard ‚Üí Grupe ‚Üí [Group Name])
- ‚úÖ Header —Å back button, edit, delete actions
- ‚úÖ Overview cards:
  - üìö Clasa (e.g., "Clasa 10-11")
  - üë• Membri (3/6 with progress)
  - üìÖ Consulta»õii (5 upcoming)
- ‚úÖ `GroupCapacityIndicator` integration (showDetails={true})
- ‚úÖ Members section —Å title
- ‚úÖ Consultations section —Å title
- ‚úÖ Metadata footer (created/updated timestamps)

###### 2Ô∏è‚É£ **GroupMembersList.tsx** (235 lines)
–î–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã:
- ‚úÖ Card grid layout (responsive: 3 col ‚Üí 2 col ‚Üí 1 col)
- ‚úÖ Avatar —Å –∏–Ω–∏—Ü–∏–∞–ª–∞–º–∏ (firstName + lastName)
- ‚úÖ Contact info: email, icon badges
- ‚úÖ Class badge (e.g., "Clasa 10")
- ‚úÖ Subject level badge (e.g., "matematicƒÉ: —Å—Ä–µ–¥–Ω–∏–π")
- ‚úÖ Remove member button (UserMinus icon)
- ‚úÖ Confirmation dialog —Å warnings:
  - "Elevul nu va mai putea participa..."
  - "Istoricul consulta»õiilor rƒÉm√¢ne intact"
  - "Poate fi adƒÉugat din nou oric√¢nd"
- ‚úÖ Empty state: "Niciun membru" —Å –ø—Ä–∏–∑—ã–≤–æ–º –¥–æ–±–∞–≤–∏—Ç—å

###### 3Ô∏è‚É£ **App.tsx Route Integration**
```tsx
<Route path="/groups/:groupId" element={
  <ProtectedRoute>
    <PageTitleProvider>
      <Layout>
        <GroupDetailsPage />
      </Layout>
    </PageTitleProvider>
  </ProtectedRoute>
} />
```

**–§–∞–π–ª—ã:** `src/pages/GroupDetailsPage.tsx`, `src/components/groups/GroupMembersList.tsx`, `src/App.tsx`

##### ‚è≥ –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –¥–ª—è Phase 4 (10h):
- [ ] `GroupConsultationsList.tsx` - comprehensive consultations display —Å filters/sorting
- [ ] `GroupSettingsDialog.tsx` - edit group (name, description, class, maxCapacity)
- [ ] `RemoveMemberDialog.tsx` - standalone confirmation dialog (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
- [ ] Empty states –¥–ª—è consultations
- [ ] Loading states
- [ ] Error handling improvements
- [ ] Mobile responsive refinements

---

### üìÖ Pending Phases (70.5% –æ—Å—Ç–∞–µ—Ç—Å—è)

#### **Phase 4.5: Cancellation & Rescheduling** (4h)
- [ ] 48-hour cancellation policy UI
- [ ] `CancellationDialog.tsx` —Å policy explanation
- [ ] `RescheduleDialog.tsx` –¥–ª—è —Å–º–µ–Ω—ã –≤—Ä–µ–º–µ–Ω–∏
- [ ] Integration –≤ consultation cards

#### **Phase 5: Attendance Tracking** (10h)
- [ ] `AttendanceMarker.tsx` –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è
- [ ] `AttendanceHistory.tsx` - –∏—Å—Ç–æ—Ä–∏—è –ø–æ—Å–µ—â–µ–Ω–∏–π
- [ ] Integration –≤ consultation details
- [ ] Absence reporting

#### **Phase 6: Materials Management** (10h)
- [ ] `MaterialUploader.tsx` - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- [ ] `MaterialsList.tsx` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- [ ] `MaterialViewer.tsx` - preview —Ñ–∞–π–ª–æ–≤
- [ ] Filtering by consultation/group

#### **Phase 7: Subscription Usage** (8h)
- [ ] `SubscriptionUsageCard.tsx` - visual tracking
- [ ] `UsageHistory.tsx` - –∏—Å—Ç–æ—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- [ ] Warning alerts –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –ª–∏–º–∏—Ç—É
- [ ] Integration –≤ student dashboard

#### **Phase 7.5: Package Selection UI** (4h) - HIGH PRIORITY
- [ ] `PackageSelector.tsx` –¥–ª—è booking flow
- [ ] Display packages:
  - Individual: 5/10/20 —É—Ä–æ–∫–æ–≤ √ó 60/90 –º–∏–Ω
  - Group-3: 8 —É—Ä–æ–∫–æ–≤ √ó 60 –º–∏–Ω
  - Group-6: 8 —É—Ä–æ–∫–æ–≤ √ó 60 –º–∏–Ω
- [ ] Price display —Å `pricePerLesson` calculations
- [ ] Type badges (Individual/Group-3/Group-6)

#### **Phase 8: Testing & Validation** (8h)
- [ ] Integration tests
- [ ] Component tests
- [ ] E2E critical flows
- [ ] Accessibility audit
- [ ] Performance optimization

#### **Phase 8.5: Teacher Profiles** (6h)
- [ ] `TeacherProfileCard.tsx`
- [ ] Ratings & reviews display
- [ ] Subject specializations
- [ ] Availability calendar

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Frontend Architecture (3-tier)
```
React App
‚îú‚îÄ‚îÄ Pages (routing layer)
‚îÇ   ‚îî‚îÄ‚îÄ GroupDetailsPage, DashboardPage, etc.
‚îú‚îÄ‚îÄ Components (presentation layer)
‚îÇ   ‚îú‚îÄ‚îÄ groups/ - GroupMembersList, AddMemberDialog, GroupCapacityIndicator
‚îÇ   ‚îú‚îÄ‚îÄ teacher/ - GroupsOverview, IndividualStudents
‚îÇ   ‚îú‚îÄ‚îÄ family/ - InviteChildDialog, ChildrenList
‚îÇ   ‚îî‚îÄ‚îÄ ui/ - shadcn/ui components
‚îú‚îÄ‚îÄ Services (data layer)
‚îÇ   ‚îî‚îÄ‚îÄ GroupService, FamilyService, ConsultationService
‚îî‚îÄ‚îÄ Types (domain models)
    ‚îî‚îÄ‚îÄ Group, Student, Consultation, Parent
```

### Backend Architecture (Clean Architecture)
```
WebAPI ‚Üí BusinessLayer ‚Üí DataAccess

WebAPI/
‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îú‚îÄ‚îÄ GroupController.cs
‚îÇ   ‚îú‚îÄ‚îÄ ConsultationController.cs
‚îÇ   ‚îî‚îÄ‚îÄ FamilyController.cs
‚îú‚îÄ‚îÄ Authorization/
‚îÇ   ‚îî‚îÄ‚îÄ Custom handlers
‚îî‚îÄ‚îÄ Services/
    ‚îî‚îÄ‚îÄ SignalRNotifier.cs

BusinessLayer/
‚îú‚îÄ‚îÄ Interfaces/ (IGroupService, etc.)
‚îú‚îÄ‚îÄ Implementations/ (GroupService, etc.)
‚îú‚îÄ‚îÄ DTOs/ (GroupDto, ConsultationDto)
‚îî‚îÄ‚îÄ Patterns/
    ‚îú‚îÄ‚îÄ Strategy/ - RatingCalculationStrategy
    ‚îú‚îÄ‚îÄ Factory/ - UserFactory
    ‚îî‚îÄ‚îÄ Adapter/ - EmailServiceFactory

DataAccess/
‚îú‚îÄ‚îÄ Models/ (Entities)
‚îú‚îÄ‚îÄ Repositories/
‚îî‚îÄ‚îÄ MyDbContext.cs (EF Core)
```

### Design Patterns Used
- **Repository Pattern**: Generic `IRepository<T>` + cached implementations
- **TPH (Table-Per-Hierarchy)**: `User` ‚Üí `Admin`/`Teacher`/`Student`/`Parent`
- **Strategy Pattern**: Rating calculations (`IRatingStrategy`)
- **Factory Pattern**: User creation (`UserFactory`)
- **Adapter Pattern**: Email services (`IEmailServiceAdapter`)

---

## üíª –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend
- **Framework**: React 18 + TypeScript (strict mode)
- **Build Tool**: Vite 6.3.6
- **Routing**: react-router-dom v6 (`useParams`, `useNavigate`)
- **UI Library**: shadcn/ui (Card, Badge, Button, Dialog, Alert, Tabs, Separator)
- **Icons**: lucide-react
- **Styling**: TailwindCSS 3 + PostCSS
- **State**: React Context (AuthContext) + useState/useEffect
- **HTTP**: Axios —Å interceptors
- **Real-time**: SignalR (`@microsoft/signalr`)
- **Animations**: GSAP (–±–∞–∑–æ–≤—ã–µ)

### Backend
- **Framework**: ASP.NET Core 8
- **ORM**: Entity Framework Core
- **Database**: SQL Server (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- **Auth**: JWT Bearer tokens + refresh tokens
- **Real-time**: SignalR Hub (`/notificationHub`)
- **Payments**: Stripe + PayPal (adapter pattern)
- **Email**: SendGrid + Mailgun (adapter pattern)
- **Storage**: Local filesystem (configurable)

### Development Tools
- **Package Manager**: npm
- **Linting**: ESLint 9
- **Type Checking**: TypeScript 5.6
- **Testing**: Vitest (planned)
- **Storybook**: Component documentation

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### Prerequisites
```bash
Node.js 18+
npm 9+
```

### Frontend Setup
```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repo-url>
cd mateos-consultation-platform

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# Development —Å–µ—Ä–≤–µ—Ä
npm run dev        # ‚Üí http://localhost:5173

# Production build
npm run build      # TypeScript check + Vite build

# Lint check
npm run lint

# Storybook
npm run storybook  # ‚Üí http://localhost:6006
```

### Backend Setup
```bash
cd Proiect/

# Restore dependencies
dotnet restore

# Run migrations (from DataAccess/)
cd DataAccess
dotnet ef migrations add InitialCreate
dotnet ef database update

# Run API (from WebAPI/)
cd ../WebAPI
dotnet run  # ‚Üí https://localhost:7001
```

### Environment Variables
Create `.env` in frontend root:
```bash
VITE_API_BASE_URL=https://localhost:7001
VITE_SIGNALR_URL=https://localhost:7001/notificationHub
```

---

## ‚öôÔ∏è –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. Mini-Groups Capacity System
**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –ì—Ä—É–ø–ø—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã 3 –∏–ª–∏ 6 —á–ª–µ–Ω–∞–º–∏
- üü¢ –ó–µ–ª–µ–Ω—ã–π: <80% capacity (safe zone)
- üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π: 80-99% (warning: 1-2 –º–µ—Å—Ç–∞ –æ—Å—Ç–∞–ª–æ—Å—å)
- üî¥ –ö—Ä–∞—Å–Ω—ã–π: 100% (full, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `GroupCapacityBadge` - compact display
- `GroupCapacityIndicator` - full Card —Å progress bar
- `AddMemberDialog` - validation + warnings

### 2. Family Model (Parent-Child)
**Workflow:**
1. Parent —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è
2. Parent –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç invite –ø–æ email —Ä–µ–±–µ–Ω–∫–∞
3. Student —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è —Å invite code
4. –°–≤—è–∑—å `parentId` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ –ë–î
5. Parent –≤–∏–¥–∏—Ç –¥–µ—Ç–µ–π –≤ `ChildrenList`

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `InviteChildDialog` - form –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ invite
- `ChildrenList` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–µ–π —Å actions
- `FamilyService` - API calls

### 3. ConsultationDto Handling ‚ö†Ô∏è IMPORTANT
**Backend –Ω–µ–ø–æ—Å—Ç–æ—è–Ω–µ–Ω –≤ —Ç–∏–ø–µ `individualStudentId`:**
```typescript
// ConsultationDto interface
{
  id: string;
  scheduledAt: string;
  status: string;
  individualStudentId: string | string[] | undefined;  // ‚ö†Ô∏è –ú–æ–∂–µ—Ç –±—ã—Ç—å string –ò–õ–ò array!
  participants: UserDto[];  // ‚ö†Ô∏è PascalCase!
}

// UserDto (PascalCase)
{
  Id: string;
  Name: string;
  Surname: string;
  Email: string;
  Role: string;
}
```

**‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –ù–æ—Ä–º–∞–ª–∏–∑—É–π—Ç–µ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:**
```typescript
// Helper –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏
const normalizeStudentIds = (individualStudentId: string | string[] | undefined): string[] => {
  if (!individualStudentId) return [];
  return Array.isArray(individualStudentId) 
    ? individualStudentId 
    : [individualStudentId];
};

// Usage:
const studentIds = normalizeStudentIds(consultation.individualStudentId);
const studentId = studentIds[0];
const student = consultation.participants?.find(p => p.Id === studentId);
```

**‚ö†Ô∏è –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–ø—Ä—è–º—É—é:**
```typescript
// ‚ùå WRONG - –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è –Ω–∞ string:
consultation.individualStudentId.filter(...)
consultation.individualStudentId.map(...)

// ‚úÖ CORRECT - –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç:
const ids = normalizeStudentIds(consultation.individualStudentId);
ids.filter(...)
ids.map(...)
```

**–°–º. —Ç–∞–∫–∂–µ:** `BUGFIX_INDIVIDUAL_STUDENT_ID.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π

### 4. Authentication Flow
```
1. Login ‚Üí POST /api/auth/login
2. Backend sets HttpOnly cookie (JWT + Refresh)
3. Frontend AuthContext updates state
4. API calls auto-include credentials
5. Token refresh –Ω–∞ 401 response
6. SignalR connection —Å JWT –≤ query string
```

### 5. Routing Pattern
```tsx
// Public routes
<Route path="/" element={<HomePage />} />
<Route path="/login" element={<LoginPage />} />

// Protected routes
<Route path="/dashboard" element={
  <ProtectedRoute>
    <PageTitleProvider>
      <Layout>
        <RoleBasedDashboard />
      </Layout>
    </PageTitleProvider>
  </ProtectedRoute>
} />

// Dynamic routes
<Route path="/groups/:groupId" element={
  <ProtectedRoute>
    <Layout>
      <GroupDetailsPage />
    </Layout>
  </ProtectedRoute>
} />
```

### 6. SignalR Integration
```typescript
// Connection management
const connection = new HubConnectionBuilder()
  .withUrl(`${config.signalrUrl}?access_token=${token}`)
  .withAutomaticReconnect()
  .build();

// Event listeners
connection.on('ReceiveNotification', (notification) => {
  // Handle notification
});

// Join user group
connection.invoke('JoinUserGroup', userId);
```

---

## üì¶ Last Build Status

```bash
‚úì 2676 modules transformed
dist/index.html                   0.95 kB ‚îÇ gzip:   0.52 kB
dist/assets/logo-CzeFsTXz.svg    42.17 kB ‚îÇ gzip:  16.66 kB
dist/assets/index-BSaw7wOh.css   83.50 kB ‚îÇ gzip:  14.12 kB
dist/assets/index-CTMcpZ7e.js   853.50 kB ‚îÇ gzip: 246.69 kB

‚úì built in 2.11s
Exit Code: 0 ‚úÖ
```

**‚ö†Ô∏è Warning:** Chunk size >500KB (code splitting recommended)

---

## üéØ –ü–ª–∞–Ω –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ (11-12 –æ–∫—Ç—è–±—Ä—è)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ó–∞–≤–µ—Ä—à–∏—Ç—å Phase 4 (10h)
- [ ] `GroupConsultationsList.tsx` - —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π –≥—Ä—É–ø–ø—ã
- [ ] `GroupSettingsDialog.tsx` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ GroupDetailsPage –Ω–∞ –≤—Å–µ—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö
- [ ] Error boundaries –¥–ª—è group operations

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: Phase 7.5 - Package Selection (4h)
**HIGH BUSINESS VALUE** –¥–ª—è MVP!
- [ ] `PackageSelector.tsx` - –≤—ã–±–æ—Ä –ø–∞–∫–µ—Ç–∞ –ø—Ä–∏ booking
- [ ] Display –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø–∞–∫–µ—Ç–æ–≤ (Individual/Group-3/Group-6)
- [ ] Price calculations —Å `pricePerLesson`
- [ ] Integration –≤ booking flow

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: Code Quality (6h)
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å TypeScript warnings (DTOs)
- [ ] –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (`PaymentFormNew`, `authServiceNew`)
- [ ] –î–æ–±–∞–≤–∏—Ç—å PropTypes/TypeScript validation
- [ ] Code splitting –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è bundle size

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: Phase 4.5 Start (4h)
- [ ] `CancellationDialog.tsx` —Å 48-hour policy
- [ ] Integration –≤ consultation cards
- [ ] Policy explanation UI

---

## üìù –í–∞–∂–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# Development
npm run dev              # Vite dev server

# Production
npm run build            # TypeScript + Vite build
npm run preview          # Preview production build

# Quality
npm run lint             # ESLint check
npm run type-check       # TypeScript validation (–µ—Å–ª–∏ –µ—Å—Ç—å)

# Documentation
npm run storybook        # Component docs

# Backend (from Proiect/)
cd DataAccess && dotnet ef migrations add MigrationName
cd DataAccess && dotnet ef database update
cd WebAPI && dotnet run
```

---

## üêõ Known Issues

1. **Chunk size warning (>500KB)**: –ù—É–∂–µ–Ω code splitting
2. **TypeScript warnings**: DTOs –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–±—É—é—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏
3. **PaymentForm duplication**: –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é
4. **GSAP animations**: Incomplete, –Ω—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
5. **Mobile responsive**: –ß–∞—Å—Ç–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –Ω—É–∂–Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫–∞

---

## üìö –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

### Components
```
src/components/
‚îú‚îÄ‚îÄ groups/
‚îÇ   ‚îú‚îÄ‚îÄ GroupCapacityBadge.tsx          (74 lines)
‚îÇ   ‚îú‚îÄ‚îÄ GroupCapacityIndicator.tsx      (150 lines)
‚îÇ   ‚îú‚îÄ‚îÄ AddMemberDialog.tsx             (215 lines)
‚îÇ   ‚îú‚îÄ‚îÄ GroupMembersList.tsx            (235 lines)
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ teacher/
‚îÇ   ‚îú‚îÄ‚îÄ GroupsOverview.tsx              (195 lines)
‚îÇ   ‚îú‚îÄ‚îÄ IndividualStudents.tsx          (237 lines)
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îî‚îÄ‚îÄ family/
    ‚îú‚îÄ‚îÄ InviteChildDialog.tsx
    ‚îú‚îÄ‚îÄ ChildrenList.tsx
    ‚îî‚îÄ‚îÄ index.ts
```

### Pages
```
src/pages/
‚îú‚îÄ‚îÄ GroupDetailsPage.tsx                (350 lines)
‚îú‚îÄ‚îÄ ConsultationsPage.tsx
‚îú‚îÄ‚îÄ ProfilePage.tsx
‚îî‚îÄ‚îÄ auth/
    ‚îú‚îÄ‚îÄ LoginPage.tsx
    ‚îî‚îÄ‚îÄ RegisterPage.tsx
```

### Services
```
src/services/
‚îú‚îÄ‚îÄ groupService.ts
‚îú‚îÄ‚îÄ consultationService.ts
‚îú‚îÄ‚îÄ familyService.ts
‚îú‚îÄ‚îÄ materialService.ts
‚îú‚îÄ‚îÄ subscriptionUsageService.ts
‚îî‚îÄ‚îÄ api.ts (ApiClient singleton)
```

### Types
```
src/types/
‚îî‚îÄ‚îÄ index.ts
    ‚îú‚îÄ‚îÄ Group interface
    ‚îú‚îÄ‚îÄ Student interface (firstName, lastName, class, parentId)
    ‚îú‚îÄ‚îÄ Consultation interface
    ‚îú‚îÄ‚îÄ Parent interface
    ‚îî‚îÄ‚îÄ ChildInvite interface
```

---

## üé® UI Patterns

### shadcn/ui Components Used
```tsx
// Layout
<Card>, <CardHeader>, <CardTitle>, <CardContent>

// Forms
<Button>, <Input>, <Label>, <Textarea>

// Feedback
<Dialog>, <AlertDialog>, <Toast>, <Alert>

// Navigation
<Tabs>, <TabsList>, <TabsTrigger>, <TabsContent>

// Data Display
<Badge>, <Avatar>, <Separator>

// Custom
<GroupCapacityBadge>, <GroupCapacityIndicator>
```

### Color System (Capacity)
```css
/* Green: <80% */
bg-green-100 text-green-700 border-green-200

/* Orange: 80-99% */
bg-orange-100 text-orange-700 border-orange-300

/* Red: 100% */
bg-red-100 text-red-700 border-red-300
```

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Frontend Repo**: (add link)
- **Backend Repo**: (add link)
- **Figma Design**: (if exists)
- **API Documentation**: `Proiect/API_DOCUMENTATION.md`
- **Test Guide**: `Proiect/API_TESTING_GUIDE.md`

---

## üë• Team Notes

### Frontend Lead
- –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π: Roman
- –§–æ–∫—É—Å: React components, TypeScript, UI/UX
- Current task: Phase 4 - Group Details Page

### Backend Lead
- (Add name)
- –§–æ–∫—É—Å: ASP.NET Core, EF Core, Clean Architecture
- Current task: API stabilization

---

## üìä Progress Tracking

```
Total Phases: 13
Completed: 4 phases (Phases 1, 2, 2.5, 3, 3.5)
In Progress: 1 phase (Phase 4: 20%)
Remaining: 8 phases

Overall Progress: 29.5%
Estimated Completion: ~60-70 hours remaining
```

**Phase Breakdown:**
- ‚úÖ Phase 1: Types (4h)
- ‚úÖ Phase 2: Services (8h)
- ‚úÖ Phase 2.5: Parent-Child (4h)
- ‚úÖ Phase 3: Teacher Dashboard (8h)
- ‚úÖ Phase 3.5: Group Capacity UI (2h)
- üîÑ Phase 4: Group Details (12h) - 20% done
- ‚è≥ Phase 4.5: Cancellation (4h)
- ‚è≥ Phase 5: Attendance (10h)
- ‚è≥ Phase 6: Materials (10h)
- ‚è≥ Phase 7: Subscription Usage (8h)
- ‚è≥ Phase 7.5: Package Selection (4h)
- ‚è≥ Phase 8: Testing (8h)
- ‚è≥ Phase 8.5: Teacher Profiles (6h)

---

## üéØ Success Metrics

### Technical
- ‚úÖ TypeScript strict mode: passing
- ‚úÖ Build —É—Å–ø–µ—à–µ–Ω: Exit Code 0
- ‚ö†Ô∏è Bundle size: 853.50 kB (–Ω—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
- ‚è≥ Test coverage: not yet measured
- ‚è≥ Lighthouse score: not yet measured

### Business
- ‚úÖ Mini-group capacity enforcement: working
- ‚úÖ Family model: implemented
- ‚è≥ Payment integration: partial
- ‚è≥ Subscription tracking: in progress
- ‚è≥ Cancellation policy: not yet

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 10 –æ–∫—Ç—è–±—Ä—è 2025, 23:45  
**–°–ª–µ–¥—É—é—â–∞—è —Å–µ—Å—Å–∏—è:** 11 –æ–∫—Ç—è–±—Ä—è (–≤—ã—Ö–æ–¥–Ω—ã–µ)  
**–°—Ç–∞—Ç—É—Å:** Ready for weekend work üöÄ
